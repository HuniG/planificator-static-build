(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(6786)}])},6786:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return $}});var a=s(5893),l=s(7294),r=s(1649),i=s(7421),c=s(3500),d=s(1640),n=s(13),o=s(6338),x=s(7524),u=s(9631),h=s(9016),m=s(9116),p=s(2646),j=e=>{let{selectedDate:t,selectedViewType:s}=e,{updateSelectedDate:l}=(0,m.e)(),{elementRef:r,showElement:i,setShowElement:j}=(0,p.S)(),b=s===u.c.Week?"month":"year",f=e=>{l(e)};return(0,a.jsxs)("div",{className:"flex flex-row justify-between gap-4 relative",children:[(0,a.jsx)("button",{onClick:()=>{let e=s===u.c.Week?(0,c.Z)(t,-1):(0,d.Z)(t,-1);l(e)},disabled:!0,children:(0,a.jsx)(n.Z,{className:"h-7 w-7 text-gray-400"})}),(0,a.jsx)("button",{onClick:()=>j(!0),disabled:!0,children:(0,a.jsx)(o.Z,{className:"h-7 w-7 text-gray-400 cursor-pointer"})}),(0,a.jsx)("button",{onClick:()=>{let e=s===u.c.Week?(0,c.Z)(t,1):(0,d.Z)(t,1);l(e)},disabled:!0,children:(0,a.jsx)(x.Z,{className:"h-7 w-7 text-gray-400"})}),i&&(0,a.jsx)("div",{className:"absolute top-[40px] right-[-110px]",ref:r,children:(0,a.jsx)(h.Z,{view:b,onClickMonth:f,onClickDay:f,value:t})})]})},b=s(4883),f=s(3330),w=s(7696),N=s(5891),y=s(1354);let g=e=>{let t=(0,y.Z)(e),s=(0,w.Z)(e);return"".concat((0,N.Z)(t,"MMM d")," - ").concat((0,N.Z)(s,"MMM d"))},v=e=>(0,N.Z)(e,"MMMM, Y");var Z=e=>{let{selectedDate:t,selectedViewType:s}=e,l=s===u.c.Week?g(t):v(t);return(0,a.jsx)("div",{className:"text-2xl font-light text-gray-600 capitalize",children:l})},k=s(945),M=s(2872),C=()=>{let{t:e}=(0,i.$G)(),t=(0,r.I0)(),{updateSelectedDate:s,selectedDateObj:l,selectedViewType:c}=(0,m.e)(),d=M.x.map(e=>({label:e.name,value:e.id})),{selectedPlaceId:n}=(0,m.e)(),o=Object.keys(u.c).map(t=>({label:e("calendar.viewType.".concat(t)),value:t}));return(0,a.jsxs)("div",{className:"flex flex-row justify-between mb-5",children:[(0,a.jsx)(b.Z,{options:d,selected:n,onChange:e=>{t(f.r.updateSelectedPlace(e))},dropdownClassName:"left-0"}),(0,a.jsx)(Z,{selectedDate:l,selectedViewType:c}),(0,a.jsxs)("div",{className:"flex flex-row items-center gap-5",children:[(0,a.jsx)(j,{selectedDate:l,selectedViewType:c}),(0,a.jsx)(k.Z,{text:e("today"),onClick:()=>{s(new Date)},disabled:!0}),(0,a.jsx)(b.Z,{options:o,selected:c,onChange:e=>{t(f.r.updateViewType(e))},disabled:!0})]})]})},_=s(9005),E=s(3703),P=s(4135),O=s(3205),T=e=>{let{t}=(0,i.$G)(),{selectedDate:s,selectedViewType:l}=e,r=l===u.c.Week,c=r?(0,y.Z)(s):(0,E.Z)(s),d=r?(0,w.Z)(s):(0,P.Z)(s),n=(0,_.Z)({start:c,end:d});return(0,a.jsx)("thead",{className:"bg-blue-400",children:(0,a.jsxs)("tr",{className:"flex",children:[(0,a.jsx)("th",{className:"".concat(r?"flex-1":"w-[140px]"," flex border-b border-r border-gray-300 px-1 py-1 text-white text-[11px] uppercase font-medium"),children:t("calendar.header.name")}),n.map((e,t)=>(0,a.jsx)("th",{className:"".concat((0,O.Z)(e)?"bg-yellow-400":""," flex flex-1 border-b border-r border-gray-300 px-1 py-1 text-white text-[11px] uppercase font-medium"),children:(0,N.Z)(e,"E d")},t))]})})},V=s(9317),D=s(7349),I=s(7891),W=s(7126),S=e=>{let{id:t,name:s,logs:r,place:i}=e,c=r.reduce((e,t)=>e+=t.hours,0);return(0,a.jsxs)(l.Fragment,{children:[(0,a.jsx)("a",{className:"w-full","data-tooltip-id":"operator".concat(t,"-details"),children:(0,a.jsx)("div",{className:"flex flex-row gap-2 cursor-pointer",children:(0,a.jsxs)("div",{className:"max-w-[125px] whitespace-nowrap",children:[(0,a.jsx)("div",{className:"text-xs text-gray-600 overflow-hidden text-ellipsis",title:s,children:s}),(0,a.jsxs)("div",{className:"flex flex-row text-gray-500 whitespace-nowrap",children:[(0,a.jsx)(W.Z,{width:"10",className:"mr-1"}),(0,a.jsx)("div",{className:"text-xs",children:c})]})]})})}),(0,a.jsx)(I.u,{id:"operator".concat(t,"-details"),render:()=>(0,a.jsxs)("div",{className:"text-xs",children:["Name: ",s,(0,a.jsx)("br",{}),"Place: ",i.name,(0,a.jsx)("br",{}),"Total worked hours: ",c]})})]})},H=s(2676);let z=l.forwardRef(function({title:e,titleId:t,...s},a){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:a,"aria-labelledby":t},s),e?l.createElement("title",{id:t},e):null,l.createElement("path",{fillRule:"evenodd",d:"M15.312 11.424a5.5 5.5 0 01-9.201 2.466l-.312-.311h2.433a.75.75 0 000-1.5H3.989a.75.75 0 00-.75.75v4.242a.75.75 0 001.5 0v-2.43l.31.31a7 7 0 0011.712-3.138.75.75 0 00-1.449-.39zm1.23-3.723a.75.75 0 00.219-.53V2.929a.75.75 0 00-1.5 0V5.36l-.31-.31A7 7 0 003.239 8.188a.75.75 0 101.448.389A5.5 5.5 0 0113.89 6.11l.311.31h-2.432a.75.75 0 000 1.5h4.243a.75.75 0 00.53-.219z",clipRule:"evenodd"}))});var F=(0,l.memo)(e=>{let{member:t,log:s}=e,l=(0,r.I0)();return(0,a.jsxs)("div",{className:"flex flex-1 items-center justify-center text-gray-500 text-xs font-base cursor-pointer",children:[s.subtitusionOperator&&(0,a.jsx)("a",{className:"w-full","data-tooltip-id":"subtitution-user-details-".concat(t.id,"-").concat(s.date),children:(0,a.jsx)(z,{width:"18",className:"text-green-600"})}),s.subtitusionPlace&&(0,a.jsx)("a",{className:"w-full","data-tooltip-id":"subtitution-details-".concat(t.id,"-").concat(s.date),children:(0,a.jsxs)("div",{className:"flex flex-row items-center justify-center",children:[(0,a.jsx)("b",{children:s.hours}),(0,a.jsx)(z,{width:"18",className:"ml-1 text-green-600"})]})}),s.holiday&&(0,a.jsx)("a",{className:"w-full","data-tooltip-id":"holiday-details-".concat(t.id,"-").concat(s.date),children:(0,a.jsx)("b",{className:"text-red-400",children:s.holiday})}),!s.holiday&&!s.subtitusionPlace&&!s.subtitusionOperator&&(0,a.jsx)("input",{className:"bg-transparent w-full h-full cursor-pointer focus:outline-1 focus:outline-blue-300 px-1",type:"number",value:s.hours?s.hours.toString():"",onChange:e=>{let a=+e.target.value;l(H.Q.updateMemberLogHours({hours:a,date:s.date,memberId:t.id}))},min:0,step:1}),(0,a.jsx)(I.u,{id:"holiday-details-".concat(t.id,"-").concat(s.date),render:()=>(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"underline text-xs font-bold",children:"Holiday details:"}),(0,a.jsxs)("p",{children:["Name: ",t.name]}),(0,a.jsxs)("p",{children:["Place: ",t.place.name]})]})}),(0,a.jsx)(I.u,{id:"subtitution-details-".concat(t.id,"-").concat(s.date),render:()=>(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"underline text-xs font-bold",children:"Subtitution details:"}),(0,a.jsxs)("p",{children:["Hours: ",s.hours]}),(0,a.jsxs)("p",{children:["Place: ",s.subtitusionPlace]})]})}),(0,a.jsx)(I.u,{id:"subtitution-user-details-".concat(t.id,"-").concat(s.date),render:()=>(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"underline text-xs font-bold",children:"Subtitution details:"}),(0,a.jsxs)("p",{children:["Operator: ",s.subtitusionOperator]})]})})]})});let R=e=>e.members;var A=s(341),G=e=>{let{selectedDate:t,selectedPlaceId:s,selectedViewType:i,selectedOperatorId:c}=e,{members:d}=(0,r.v9)(R),n=(0,r.I0)(),o=i===u.c.Week,x=(0,l.useMemo)(()=>o?(0,y.Z)(t):(0,E.Z)(t),[o,t]),h=(0,l.useMemo)(()=>o?(0,w.Z)(t):(0,P.Z)(t),[o,t]),m=(0,l.useCallback)(()=>(0,A.o)(x,h,s),[x,h,s]);(0,l.useEffect)(()=>{n(H.Q.updateMembers(m()))},[n,m,t,s,c]);let p=e=>(0,V.Z)((0,D.Z)(x,e));return(0,a.jsx)("tbody",{children:d.map(e=>(0,a.jsxs)("tr",{className:"flex hover:bg-gray-100",children:[(0,a.jsx)("td",{className:"".concat(o?"flex-1":"w-[140px]"," flex border-b border-r border-gray-300 px-1 py-1"),children:(0,a.jsx)(S,{...e})}),e.logs.map((t,s)=>(0,a.jsx)("td",{className:"flex flex-1 border-b border-r border-gray-300 px-1 py-1 ".concat(p(s)?"bg-slate-200":""),children:(0,a.jsx)(F,{member:e,log:t})},"".concat(e.id,"-").concat(t.date)))]},e.id))})},Q=()=>{let{selectedDateObj:e,selectedPlaceId:t,selectedViewType:s,selectedOperatorId:r}=(0,m.e)();return(0,a.jsx)(l.Fragment,{children:(0,a.jsxs)("table",{className:"w-full text-left border-gray-200 border-t border-l",children:[(0,a.jsx)(T,{selectedDate:e,selectedViewType:s}),(0,a.jsx)(G,{selectedDate:e,selectedPlaceId:t,selectedViewType:s,selectedOperatorId:r})]})})},X=()=>(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)(C,{}),(0,a.jsx)(Q,{})]}),$=()=>(0,a.jsx)(l.Fragment,{children:(0,a.jsx)("div",{className:"flex justify-center items-center p-5",children:(0,a.jsx)(X,{})})})}},function(e){e.O(0,[333,357,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);