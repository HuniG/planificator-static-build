(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[117],{3358:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/operators",function(){return s(8467)}])},8467:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return Y}});var a=s(5893),r=s(7294),l=s(1649),c=s(7421),d=s(3500),n=s(1640),o=s(13),i=s(6338),x=s(7524),u=s(9631),p=s(9016),h=s(9116),m=s(2646),j=e=>{let{selectedDate:t,selectedViewType:s}=e,{updateSelectedDate:r}=(0,h.e)(),{elementRef:l,showElement:c,setShowElement:j}=(0,m.S)(),f=s===u.c.Week?"month":"year",b=e=>{r(e)};return(0,a.jsxs)("div",{className:"flex flex-row justify-between gap-4 relative",children:[(0,a.jsx)("button",{onClick:()=>{let e=s===u.c.Week?(0,d.Z)(t,-1):(0,n.Z)(t,-1);r(e)},disabled:!0,children:(0,a.jsx)(o.Z,{className:"h-7 w-7 text-gray-400"})}),(0,a.jsx)("button",{onClick:()=>j(!0),disabled:!0,children:(0,a.jsx)(i.Z,{className:"h-7 w-7 text-gray-400 cursor-pointer"})}),(0,a.jsx)("button",{onClick:()=>{let e=s===u.c.Week?(0,d.Z)(t,1):(0,n.Z)(t,1);r(e)},disabled:!0,children:(0,a.jsx)(x.Z,{className:"h-7 w-7 text-gray-400"})}),c&&(0,a.jsx)("div",{className:"absolute top-[40px] right-[-110px]",ref:l,children:(0,a.jsx)(p.Z,{view:f,onClickMonth:b,onClickDay:b,value:t})})]})},f=s(4883),b=s(3330),w=s(7696),N=s(5891),y=s(1354);let g=e=>{let t=(0,y.Z)(e),s=(0,w.Z)(e);return"".concat((0,N.Z)(t,"MMM d")," - ").concat((0,N.Z)(s,"MMM d"))},v=e=>(0,N.Z)(e,"MMMM, Y");var Z=e=>{let{selectedDate:t,selectedViewType:s}=e,r=s===u.c.Week?g(t):v(t);return(0,a.jsx)("div",{className:"text-2xl font-light text-gray-600 capitalize",children:r})},k=s(945),M=s(6962),_=()=>{let{t:e}=(0,c.$G)(),t=(0,l.I0)(),{updateSelectedDate:s,selectedDateObj:r,selectedViewType:d}=(0,h.e)(),n=M.G.map(e=>({label:e.name,value:e.id})),{selectedOperatorId:o}=(0,h.e)(),i=Object.keys(u.c).map(t=>({label:e("calendar.viewType.".concat(t)),value:t}));return(0,a.jsxs)("div",{className:"flex flex-row justify-between mb-5",children:[(0,a.jsx)(f.Z,{options:n,selected:o,onChange:e=>{t(b.r.updateSelectedOperator(e))},dropdownClassName:"left-0"}),(0,a.jsx)(Z,{selectedDate:r,selectedViewType:d}),(0,a.jsxs)("div",{className:"flex flex-row items-center gap-5",children:[(0,a.jsx)(j,{selectedDate:r,selectedViewType:d}),(0,a.jsx)(k.Z,{text:e("today"),onClick:()=>{s(new Date)},disabled:!0}),(0,a.jsx)(f.Z,{options:i,selected:d,onChange:e=>{t(b.r.updateViewType(e))},disabled:!0})]})]})},C=s(9005),T=s(3703),E=s(4135),I=s(3205),O=e=>{let{t}=(0,c.$G)(),{selectedDate:s,selectedViewType:r}=e,l=r===u.c.Week,d=l?(0,y.Z)(s):(0,T.Z)(s),n=l?(0,w.Z)(s):(0,E.Z)(s),o=(0,C.Z)({start:d,end:n});return(0,a.jsx)("thead",{className:"bg-blue-400",children:(0,a.jsxs)("tr",{className:"flex",children:[(0,a.jsx)("th",{className:"".concat(l?"flex-1":"w-[140px]"," flex border-b border-r border-gray-300 px-1 py-1 text-white text-[11px] uppercase font-medium"),children:t("calendar.header.name")}),o.map((e,t)=>(0,a.jsx)("th",{className:"".concat((0,I.Z)(e)?"bg-yellow-400":""," flex flex-1 border-b border-r border-gray-300 px-1 py-1 text-white text-[11px] uppercase font-medium"),children:(0,N.Z)(e,"E d")},t))]})})},D=s(9317),P=s(7349),W=s(9634),H=s(7891),V=(0,r.memo)(e=>{let{hours:t,date:s,placeId:r,holiday:c,placeName:d,operatorName:n}=e,o=(0,l.I0)();return(0,a.jsxs)("div",{className:"flex flex-1 items-center text-gray-500 text-xs font-base cursor-pointer",children:[c&&(0,a.jsx)("a",{className:"w-full","data-tooltip-id":"holiday-details-".concat(r,"-").concat(s),children:(0,a.jsx)("b",{className:"text-red-400",children:c})}),!c&&(0,a.jsx)("input",{className:"bg-transparent w-full h-full cursor-pointer focus:outline-1 focus:outline-blue-300 px-1",type:"number",value:t?t.toString():"",onChange:e=>{let t=+e.target.value;o(W._.updatePlaceLogHours({hours:t,date:s,placeId:r}))},min:0,step:1}),(0,a.jsx)(H.u,{id:"holiday-details-".concat(r,"-").concat(s),render:()=>(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"underline text-xs font-bold",children:"Holiday details:"}),(0,a.jsxs)("p",{children:["Place: ",d]}),(0,a.jsxs)("p",{children:["Operator: ",n]})]})})]})});let F=e=>e.places;var G=s(341),S=s(7126),$=e=>{let{id:t,name:s,logs:l,operator:c}=e,d=l.reduce((e,t)=>e+=t.hours,0);return(0,a.jsxs)(r.Fragment,{children:[(0,a.jsx)("a",{className:"w-full","data-tooltip-id":"operator".concat(t,"-details"),children:(0,a.jsx)("div",{className:"flex flex-row gap-2 cursor-pointer",children:(0,a.jsxs)("div",{className:"max-w-[125px] whitespace-nowrap",children:[(0,a.jsx)("div",{className:"text-xs text-gray-600 overflow-hidden text-ellipsis",title:s,children:s}),(0,a.jsxs)("div",{className:"flex flex-row text-gray-500 whitespace-nowrap",children:[(0,a.jsx)(S.Z,{width:"10",className:"mr-1"}),(0,a.jsx)("div",{className:"text-xs",children:d})]})]})})}),(0,a.jsx)(H.u,{id:"operator".concat(t,"-details"),render:()=>(0,a.jsxs)("div",{className:"text-xs",children:["Name: ",s,(0,a.jsx)("br",{}),"Operator: ",c.name,(0,a.jsx)("br",{}),"Total worked hours: ",d]})})]})},B=e=>{let{selectedDate:t,selectedPlaceId:s,selectedViewType:c,selectedOperatorId:d}=e,{places:n}=(0,l.v9)(F),o=(0,l.I0)(),i=c===u.c.Week,x=(0,r.useMemo)(()=>i?(0,y.Z)(t):(0,T.Z)(t),[i,t]),p=(0,r.useMemo)(()=>i?(0,w.Z)(t):(0,E.Z)(t),[i,t]),h=(0,r.useCallback)(()=>(0,G.k)(x,p,d),[x,p,d]);(0,r.useEffect)(()=>{o(W._.updatePlaces(h()))},[o,h,t,s,d]);let m=e=>(0,D.Z)((0,P.Z)(x,e));return(0,a.jsx)("tbody",{children:n.map(e=>(0,a.jsxs)("tr",{className:"flex hover:bg-gray-100",children:[(0,a.jsx)("td",{className:"".concat(i?"flex-1":"w-[140px]"," flex border-b border-r border-gray-300 px-1 py-1"),children:(0,a.jsx)($,{...e})}),e.logs.map((t,s)=>{let{hours:r,date:l,holiday:c}=t;return(0,a.jsx)("td",{className:"flex flex-1 border-b border-r border-gray-300 px-1 py-1 ".concat(m(s)?"bg-slate-200":""),children:(0,a.jsx)(V,{hours:r,placeId:e.id,placeName:e.name,operatorName:e.operator.name,date:l,holiday:c})},"".concat(e.id,"-").concat(l))})]},e.id))})},X=()=>{let{places:e}=(0,l.v9)(F),{t}=(0,c.$G)(),s=(0,r.useMemo)(()=>e.reduce((e,t)=>e+=t.logs.reduce((e,t)=>e+=t.hours,0),0),[e]),d=(0,r.useMemo)(()=>e[0]?e[0].operator.lunchBreak:0,[e]),n=(0,r.useMemo)(()=>e[0]?e[0].workload:0,[e]),o=(0,r.useMemo)(()=>e[0]?e[0].operator.backHours:0,[e]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{className:"text-sm font-bold text-gray-600 mt-1",children:t("totalHours",{hours:s})}),(0,a.jsx)("p",{className:"text-sm font-bold text-gray-600 mt-1",children:t("lunchBreak",{hours:d})}),(0,a.jsx)("p",{className:"text-sm font-bold text-gray-600 mt-1",children:t("finalHours",{hours:o+s+d-n})})]})},z=()=>{let{selectedDateObj:e,selectedPlaceId:t,selectedViewType:s,selectedOperatorId:l}=(0,h.e)();return(0,a.jsxs)(r.Fragment,{children:[(0,a.jsxs)("table",{className:"w-full text-left border-gray-200 border-t border-l",children:[(0,a.jsx)(O,{selectedDate:e,selectedViewType:s}),(0,a.jsx)(B,{selectedDate:e,selectedPlaceId:t,selectedViewType:s,selectedOperatorId:l})]}),(0,a.jsx)(X,{})]})},L=()=>(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)(_,{}),(0,a.jsx)(z,{})]}),Y=()=>(0,a.jsx)(r.Fragment,{children:(0,a.jsx)("div",{className:"flex justify-center items-center p-5",children:(0,a.jsx)(L,{})})})}},function(e){e.O(0,[333,357,774,888,179],function(){return e(e.s=3358)}),_N_E=e.O()}]);